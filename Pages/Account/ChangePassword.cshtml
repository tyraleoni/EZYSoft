@page
@model WebApplication1.Pages.Account.ChangePasswordModel
@{
}

<div class="container mt-5">
 <h2>Change Password</h2>
 <form method="post">
 <div asp-validation-summary="All" class="text-danger"></div>
 <div class="mb-3">
 <label class="form-label">Current Password</label>
 <input asp-for="CurrentPassword" type="password" class="form-control" />
 </div>
 <div class="mb-3">
 <label class="form-label">New Password</label>
 <input asp-for="NewPassword" id="newPassword" type="password" class="form-control" />
 <div class="progress mt-2" style="height:8px;">
 <div id="pwStrength" class="progress-bar" role="progressbar" style="width:0%"></div>
 </div>
 <small id="pwFeedback" class="form-text text-muted"></small>
 </div>
 <div class="mb-3">
 <label class="form-label">Confirm Password</label>
 <input asp-for="ConfirmPassword" type="password" class="form-control" />
 </div>
 <div class="mb-3">
 <button type="submit" class="btn btn-primary">Change Password</button>
 </div>
 </form>
 @if (!string.IsNullOrEmpty(Model.Message))
 {
 <div class="alert alert-success">@Model.Message</div>
 }
</div>

@section Scripts {
 <script>
 function scorePassword(pw) {
 var score =0;
 if (!pw) return0;
 if (pw.length >=12) score +=2; else score += Math.max(0, pw.length -6);
 if (/[A-Z]/.test(pw)) score +=2;
 if (/[a-z]/.test(pw)) score +=1;
 if (/[0-9]/.test(pw)) score +=2;
 if (/[^A-Za-z0-9]/.test(pw)) score +=3;
 return Math.min(score,10);
 }
 var input = document.getElementById('newPassword');
 var bar = document.getElementById('pwStrength');
 var feedback = document.getElementById('pwFeedback');
 if (input) {
 input.addEventListener('input', function (e) {
 var s = scorePassword(e.target.value);
 var pct = Math.round((s /10) *100);
 bar.style.width = pct + '%';
 bar.className = 'progress-bar';
 if (pct <40) { bar.classList.add('bg-danger'); feedback.textContent = 'Weak'; }
 else if (pct <70) { bar.classList.add('bg-warning'); feedback.textContent = 'Fair'; }
 else { bar.classList.add('bg-success'); feedback.textContent = 'Strong'; }
 });
 }
 </script>
}